# Пользовательские сценарии и структура

## Пользовательские роли
- **Администратор**: Полный доступ ко всем функциям
- **Пользователь**: Стандартный доступ к dashboard

## Пользовательские сценарии

### Первый вход
1. Пользователь переходит на сайт
2. Автоматический редирект на `/login`
3. Ввод логина и пароля
4. Успешная авторизация → редирект на `/dashboard`
5. Сохранение сессии на 30 дней

### Повседневная работа
1. Пользователь открывает сайт
2. Автоматический вход (проверка сессии)
3. Работа с dashboard
4. Сессия автоматически продлевается при активности

### Выход из системы
1. Клик на кнопку "Выход"
2. Очистка сессии
3. Редирект на страницу входа

## Структура навигации

```
Главная страница (/)
├── Авторизация (/login)
└── Dashboard (/dashboard)
    ├── Главная
    ├── Настройки
    └── Выход
```

## Поток данных

```
Браузер → Next.js Middleware → Проверка авторизации
                              ↓
                           Страница/API
                              ↓
                          PostgreSQL
```

## Схема авторизации

```typescript
interface User {
  username: string;
  role: 'admin' | 'user';
}

interface Session {
  user: User;
  isLoggedIn: boolean;
  loginTime: Date;
}
```

## Обработка ошибок

### Типы ошибок
- Неверные учетные данные
- Истекшая сессия
- Ошибки сервера
- Недоступность базы данных

### Пользовательские сообщения
- "Неверный логин или пароль"
- "Сессия истекла, войдите снова"
- "Сервер временно недоступен"
- "Попробуйте позже"

## Адаптивность

### Мобильные устройства
- Упрощенная навигация
- Крупные кнопки
- Адаптивные таблицы

### Планшеты
- Боковая панель навигации
- Оптимизированные формы

### Десктоп
- Полная функциональность
- Горячие клавиши
- Контекстные меню